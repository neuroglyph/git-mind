#!/usr/bin/env bash
# Quick pre-push check - just the essentials
set -euo pipefail

echo "🚀 Running quick pre-push checks..."

# Local checks (no Docker)
echo "→ Checking for TODOs..."
if grep -nE "(TODO|FIXME|XXX)" $(find core -name "*.c" -o -name "*.h" 2>/dev/null); then
    echo "❌ NO TODOs ALLOWED"
    exit 1
fi

echo "→ Quick build test..."
cd core
meson setup build-quick 2>/dev/null || true
ninja -C build-quick >/dev/null
cd ..

echo "✅ Quick checks passed!"